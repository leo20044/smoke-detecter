<xml xmlns="https://developers.google.com/blockly/xml"><variables><variable id="X+uAu+$`,m2NRv:EVWf+">sensorValue</variable><variable id="xdG;D@FK6;Gj%|!yc},W">threshold</variable></variables><block type="pxt-on-start" id="jZxTF{XBJ_KhY)~%zv)7" x="0" y="0"><statement name="HANDLER"><block type="variables_set" id="aba@Ly@3vR8fD{l0ZF8;"><field name="VAR" id="xdG;D@FK6;Gj%|!yc},W">threshold</field><comment pinned="false" h="80" w="160">Set a threshold value for smoke detection</comment><value name="VALUE"><shadow type="math_number" id="pGKfp0SWJ~~.WeARhk-_"><field name="NUM">460</field></shadow></value></block></statement></block><block type="device_forever" id="N)U,/4`E$U%uZSK@/.Sq" x="336" y="0"><comment pinned="false" h="80" w="160">Set a threshold value for smoke detection</comment><statement name="HANDLER"><block type="variables_set" id="0LHA$FCpQ%5lVij=G#1i"><field name="VAR" id="X+uAu+$`,m2NRv:EVWf+">sensorValue</field><comment pinned="false" h="80" w="160">Read the analog value from MQ-7</comment><value name="VALUE"><shadow type="math_number" id="yTaJ0un6UfwC2N_fS+@O"><field name="NUM">0</field></shadow><block type="device_get_analog_pin" id="l.N^`uqj.cAdDacCGMTi"><value name="name"><shadow type="analog_read_write_pin_shadow" id="9s=;!2r^@Rp[hmBy$48{"><field name="pin">AnalogReadWritePin.P0</field></shadow><block type="analog_pin" id="Z,(5b!~s@.mYinr}VPU^"><field name="pin">AnalogPin.P0</field></block></value></block></value><next><block type="controls_if" id="y(0T.RG3aAkyiGdaJ#V}"><mutation else="1"></mutation><value name="IF0"><shadow type="logic_boolean" id="A~66CV~xQI}Jscl-UU8p"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="+0ULRB$|$?@U]u8wPpsQ"><field name="OP">GT</field><value name="A"><shadow type="math_number" id="kNv(r9$niXV`32a4]!~n"><field name="NUM">0</field></shadow><block type="variables_get" id="-}+fsP_o;j_if}fqJ-k["><field name="VAR" id="X+uAu+$`,m2NRv:EVWf+">sensorValue</field></block></value><value name="B"><shadow type="math_number" id="^QAO9.IVvvAdi)~Af[.L"><field name="NUM">0</field></shadow><block type="variables_get" id="[-mq!.#he+:`@uEdRT7w"><field name="VAR" id="xdG;D@FK6;Gj%|!yc},W">threshold</field></block></value></block></value><statement name="DO0"><block type="basic_show_icon" id="e6@*sBd+@p73U:q}YKwO"><field name="i">IconNames.Sad</field><comment pinned="false" h="80" w="160">If smoke is detected
Show a sad face</comment><next><block type="device_while" id="ZsAor:emljE@U1w0Ba[Z"><comment pinned="false" h="80" w="160">Continuously beep while smoke is detected</comment><value name="COND"><shadow type="logic_boolean" id="4e9xY;{8+aw71im;*GI@"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="l+ujgXsfKeQVFr1Np?5T"><field name="OP">GT</field><value name="A"><shadow type="math_number" id="P0G-yW%LZ2X:]OP};c%q"><field name="NUM">0</field></shadow><block type="variables_get" id="#}4E5G`.?^^sR+W4jW+j"><field name="VAR" id="X+uAu+$`,m2NRv:EVWf+">sensorValue</field></block></value><value name="B"><shadow type="math_number" id="!^Y!U/LEBg85TdO:,bFl"><field name="NUM">0</field></shadow><block type="variables_get" id="fyj,L,U[r;G2))V3,A#p"><field name="VAR" id="xdG;D@FK6;Gj%|!yc},W">threshold</field></block></value></block></value><statement name="DO"><block type="device_play_note" id="Xo}+g0jRcBef84RW^u0O"><comment pinned="false" h="80" w="160">Beep the alarm</comment><value name="note"><shadow type="device_note" id="sSe(q{6?m|{qmnRaIWlj"><field name="name">262</field></shadow></value><value name="duration"><shadow type="device_beat" id="`/O;D,r8aS71`75v@)2)"><field name="fraction">BeatFraction.Quarter</field></shadow></value><next><block type="device_pause" id="y3/9n!X,|:rp6lrDGQ;W"><comment pinned="false" h="80" w="160">Adjust pause duration for beep frequency</comment><value name="pause"><shadow type="timePicker" id="(K-AXLav:KG!~|}xX/TK"><field name="ms">100</field></shadow></value><next><block type="variables_set" id=".j:shYLx]fmkTHK2x)4("><field name="VAR" id="X+uAu+$`,m2NRv:EVWf+">sensorValue</field><comment pinned="false" h="80" w="160">Re-read the sensor value</comment><value name="VALUE"><shadow type="math_number" id="ZGy[WMmv53EuP%,cV2Zx"><field name="NUM">0</field></shadow><block type="device_get_analog_pin" id="z}$Fv6r!C4$wH0SLS?bb"><value name="name"><shadow type="analog_read_write_pin_shadow" id=".U^rRc4h*7B7rLiYXg-!"><field name="pin">AnalogReadWritePin.P0</field></shadow><block type="analog_pin" id="*troN8}m?#3Je4jss6Z$"><field name="pin">AnalogPin.P0</field></block></value></block></value></block></next></block></next></block></statement></block></next></block></statement><statement name="ELSE"><block type="device_clear_display" id="))7px=HeKt`=}SCxHZ0g"><comment pinned="false" h="80" w="160">If no smoke is detected
Clear the screen before showing the happy face</comment><next><block type="basic_show_icon" id="IgLQ%4#4MuQ9#50#I1E_"><field name="i">IconNames.Happy</field><comment pinned="false" h="80" w="160">Show a happy face</comment><next><block type="music_stop_all_sounds" id=":m[^S0]M_+a+R`*_pfaE"><comment pinned="false" h="80" w="160">Stop any sound that is currently playing</comment></block></next></block></next></block></statement><next><block type="device_pause" id="-+Ou37~U2}y$p42mXXmf"><comment pinned="false" h="80" w="160">Wait for half a second before the next reading</comment><value name="pause"><shadow type="timePicker" id=".fA{y:L|axy|lHucIjAB"><field name="ms">500</field></shadow></value></block></next></block></next></block></statement></block></xml>